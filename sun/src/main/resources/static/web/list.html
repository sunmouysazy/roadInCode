<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8"/>
  <title>用户管理页面</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

</head>

<body>


<div class="panel-body">
  <!--地址显示-->
  <table>
    <caption>用户列表</caption>
    <thead>
    <tr>
      <th>id</th>
      <th>用户名</th>
      <th>密码</th>
      <th colspan="3">操作</th>
    </tr>
    </thead>

    <tbody id="user-list">
    <tr>
      <td>1</td>
      <td>测试账号</td>
      <td>测试密码</td>
      <td><a href="#">修改</a></td>
      <td><a href="#">删除</a></td>
    </tr>
    </tbody>
  </table>
  <form id="form-page" action="list.html" method="get">
    <input id="page" type='text' onkeyup="this.value=this.value.replace(/[^0-9-]+/,'');"/>
    <input id="btn-page" type="submit" value="跳转">
  </form>
  <input id="page-up" type="button" value="上一页">&nbsp;&nbsp;&nbsp;<input id="page-down" type="button" value="下一页">
</div>
</div>

</div>


<script type="text/javascript">
  /*页面加载完成后开始执行*/
  $(document).ready(function() {
    userList();
  });
  // 首次加载
  function userList(){
    var url = '../user/pageFind';
    var data = $('#form-page').serialize();
    $.ajax({
      'url': url,
      'data':data,
      'type': 'GET',
      'dataType': 'json',
      'success': function(json) {
        // 清除原有列表
        $('#user-list').empty();
        // 从返回结果中获取数据
        var list = json.data;
        // 遍历收货地址数据
        console.log('用户列表数据：');
        for (var i = 0; i < list.length; i++) {
          console.log('id=' + list[i].id + ', username=' + list[i].username + ', password=' + list[i].password + ', role_id=' + list[i].roleId);
          // 定义HTML代码的模版
          var html = '<tr>'
              + '<td>#{user_id}</td>'
              + '<td>#{user_username}</td>'
              + '<td>#{user_password}</td>'
              + '<td>#{role_id}</td>'
              + '<td><a  href="#">修改</a></td>'
              + '<td><a  href="#">删除</a></td>'
              + '</tr>';

          // 替换模版中的占位符
          html = html.replace('#{user_id}', list[i].id);
          html = html.replace('#{user_username}', list[i].username);
          html = html.replace('#{user_password}', list[i].password);
          html = html.replace('#{role_id}', list[i].roleId);

          // 将HTML代码添加到表格中
          $('#user-list').append(html);
        }
      },
    });
  }



</script>
</body>

</html>